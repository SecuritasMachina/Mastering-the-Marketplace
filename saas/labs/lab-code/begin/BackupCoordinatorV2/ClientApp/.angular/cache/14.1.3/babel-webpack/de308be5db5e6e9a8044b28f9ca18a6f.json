{"ast":null,"code":"import _asyncToGenerator from \"C:/data/source/Mastering-the-Marketplace/saas/labs/lab-code/begin/BackupCoordinatorV2/ClientApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { environment } from '../../../environments/environment';\nlet LogListComponent = class LogListComponent {\n  constructor(http, _Activatedroute) {\n    this._Activatedroute = _Activatedroute;\n    this.logMsg = {};\n    this._logMsg = [];\n    this._http = http;\n  }\n\n  ngOnInit() {\n    this._guid = this._Activatedroute.snapshot.paramMap.get(\"guid\");\n\n    this._http.get(environment.appServerURL + '/api/v3/getLogs/' + this._guid).subscribe(result => {\n      console.info('result', result);\n      this._logMsg = result;\n      console.info('this.logMsg.msg', this._logMsg); //this.dirListingDTO = Object.assign({}, tmp1.fileDTOs); \n      //console.info(' this.dirListingDTO', this.dirListingDTO);\n      // console.info(' this.dirListingDTO length', this.dirListingDTO.length);\n    }, error => console.error(error));\n\n    console.log(\"this._guid\", this._guid);\n  }\n\n  view(pRestoreFileName) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      console.info(' pRestoreFileName', pRestoreFileName); //this.httpCall(\"POST\", pRestoreFileName)\n\n      const response = yield fetch(environment.appServerURL + \"/api/v2/requestRestore\", {\n        method: 'POST',\n        body: JSON.stringify({\n          backupName: pRestoreFileName,\n          customerGUID: _this._guid\n        }),\n        headers: {\n          'Content-Type': 'application/json',\n          Accept: 'application/json'\n        }\n      });\n\n      if (!response.ok) {\n        throw new Error(`Error! status: ${response.status}`);\n      }\n    })();\n  }\n\n};\nLogListComponent = __decorate([Component({\n  selector: 'app-log-list',\n  templateUrl: './log-list.component.html',\n  styleUrls: ['./log-list.component.css']\n})], LogListComponent);\nexport { LogListComponent };","map":{"version":3,"mappings":";;AAAA,SAASA,SAAT,QAA0C,eAA1C;AAEA,SAASC,WAAT,QAA4B,mCAA5B;AAQA,IAAaC,gBAAgB,GAA7B,MAAaA,gBAAb,CAA6B;EAM3BC,YAAYC,IAAZ,EAAsCC,eAAtC,EAAqE;IAA/B;IAJ/B,cAAS,EAAT;IACA,eAAoB,EAApB;IAIL,KAAKC,KAAL,GAAaF,IAAb;EACD;;EAEDG,QAAQ;IACN,KAAKC,KAAL,GAAa,KAAKH,eAAL,CAAqBI,QAArB,CAA8BC,QAA9B,CAAuCC,GAAvC,CAA2C,MAA3C,CAAb;;IACA,KAAKL,KAAL,CAAWK,GAAX,CAAyBV,WAAW,CAACW,YAAZ,GAA2B,kBAA3B,GAAgD,KAAKJ,KAA9E,EAAqFK,SAArF,CAA+FC,MAAM,IAAG;MACtGC,OAAO,CAACC,IAAR,CAAa,QAAb,EAAuBF,MAAvB;MACA,KAAKG,OAAL,GAAeH,MAAf;MAEAC,OAAO,CAACC,IAAR,CAAa,iBAAb,EAAgC,KAAKC,OAArC,EAJsG,CAMtG;MACA;MACA;IACD,CATD,EASIC,KAAD,IAAgBH,OAAO,CAACG,KAAR,CAAcA,KAAd,CATnB;;IAUAH,OAAO,CAACI,GAAR,CAAY,YAAZ,EAA0B,KAAKX,KAA/B;EACD;;EACKY,IAAI,CAACC,gBAAD,EAAyB;IAAA;;IAAA;MACjCN,OAAO,CAACC,IAAR,CAAa,mBAAb,EAAkCK,gBAAlC,EADiC,CAEjC;;MACA,MAAMC,QAAQ,SAASC,KAAK,CAACtB,WAAW,CAACW,YAAZ,GAA2B,wBAA5B,EAAsD;QAChFY,MAAM,EAAE,MADwE;QAEhFC,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;UACnBC,UAAU,EAAEP,gBADO;UAEnBQ,YAAY,EAAE,KAAI,CAACrB;QAFA,CAAf,CAF0E;QAMhFsB,OAAO,EAAE;UACP,gBAAgB,kBADT;UAEPC,MAAM,EAAE;QAFD;MANuE,CAAtD,CAA5B;;MAYA,IAAI,CAACT,QAAQ,CAACU,EAAd,EAAkB;QAChB,MAAM,IAAIC,KAAJ,CAAU,kBAAkBX,QAAQ,CAACY,MAAM,EAA3C,CAAN;MACD;IAjBgC;EAkBlC;;AA1C0B,CAA7B;AAAahC,gBAAgB,eAL5BF,SAAS,CAAC;EACTmC,QAAQ,EAAE,cADD;EAETC,WAAW,EAAE,2BAFJ;EAGTC,SAAS,EAAE,CAAC,0BAAD;AAHF,CAAD,CAKmB,GAAhBnC,gBAAgB,CAAhB;SAAAA","names":["Component","environment","LogListComponent","constructor","http","_Activatedroute","_http","ngOnInit","_guid","snapshot","paramMap","get","appServerURL","subscribe","result","console","info","_logMsg","error","log","view","pRestoreFileName","response","fetch","method","body","JSON","stringify","backupName","customerGUID","headers","Accept","ok","Error","status","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["C:\\data\\source\\Mastering-the-Marketplace\\saas\\labs\\lab-code\\begin\\BackupCoordinatorV2\\ClientApp\\src\\app\\Components\\log-list\\log-list.component.ts"],"sourcesContent":["import { Component, OnInit, Inject } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { environment } from '../../../environments/environment';\nimport { ActivatedRoute } from '@angular/router'\n\n@Component({\n  selector: 'app-log-list',\n  templateUrl: './log-list.component.html',\n  styleUrls: ['./log-list.component.css']\n})\nexport class LogListComponent implements OnInit {\n  _http: HttpClient;\n  public logMsg = {} as LogMsg;\n  public _logMsg: LogMsg[] = [];\n  public _guid: string | null | undefined;\n\n  constructor(http: HttpClient, private _Activatedroute: ActivatedRoute) {\n    this._http = http;\n  }\n\n  ngOnInit(): void {\n    this._guid = this._Activatedroute.snapshot.paramMap.get(\"guid\");\n    this._http.get<LogMsg[]>(environment.appServerURL + '/api/v3/getLogs/' + this._guid).subscribe(result => {\n      console.info('result', result);\n      this._logMsg = result;\n\n      console.info('this.logMsg.msg', this._logMsg);\n\n      //this.dirListingDTO = Object.assign({}, tmp1.fileDTOs); \n      //console.info(' this.dirListingDTO', this.dirListingDTO);\n      // console.info(' this.dirListingDTO length', this.dirListingDTO.length);\n    }, (error: any) => console.error(error));\n    console.log(\"this._guid\", this._guid);\n  }\n  async view(pRestoreFileName: string): Promise<void> {\n    console.info(' pRestoreFileName', pRestoreFileName);\n    //this.httpCall(\"POST\", pRestoreFileName)\n    const response = await fetch(environment.appServerURL + \"/api/v2/requestRestore\", {\n      method: 'POST',\n      body: JSON.stringify({\n        backupName: pRestoreFileName,\n        customerGUID: this._guid,\n      }),\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n      },\n    });\n\n    if (!response.ok) {\n      throw new Error(`Error! status: ${response.status}`);\n    }\n  }\n}\n\ninterface LogMsg {\n  logTime: string;\n  msg: string;\n  id: string;\n}\n"]},"metadata":{},"sourceType":"module"}